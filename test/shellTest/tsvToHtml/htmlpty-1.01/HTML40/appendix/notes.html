<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="en">
<!-- $Id: notes.src,v 1.50 1997/11/10 17:30:18 ian Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Performance, Implementation, and Design Notes</title>
<LINK rel="previous" href="changes.html">
<LINK rel="next" href="../references.html">
<LINK rel="contents" href="../cover.html#toc">
<LINK rel="STYLESHEET" href="../style/default.css" type="text/css">
</head>
<body>
<div class="navbar">
<center>&nbsp;<a href="changes.html">previous</a> &nbsp; <a href="../references.html">next</a> &nbsp; <a href="../cover.html#toc">contents</a> &nbsp; <a href="../index/elements.html">elements</a> &nbsp; <a href="../index/attribs.html">attributes</a>
</center><hr>
</div>

<H1 align="center"><a name="h-B">Appendix B:</a> Performance, Implementation, and Design Notes</H1>
<div class="subtoc"><p><strong>Contents</strong>
<ol>
<li><a href="notes.html#h-B.1">Representing non-ASCII characters in URLs</a>
<li><a href="notes.html#h-B.2">SGML implementation notes</a>
<ol>
<li><a href="notes.html#h-B.2.1">Line breaks</a>
<li><a href="notes.html#h-B.2.2">SGML features with limited support</a>
<li><a href="notes.html#h-B.2.3">Boolean attributes</a>
<li><a href="notes.html#h-B.2.4">Marked Sections</a>
<li><a href="notes.html#h-B.2.5">Processing Instructions</a>
<li><a href="notes.html#h-B.2.6">Shorthand markup</a>
</ol>
<li><a href="notes.html#h-B.3">Notes on helping search engines index your Web site</a>
<ol>
<li><a href="notes.html#h-B.3.1">Search robots</a>
</ol>
<li><a href="notes.html#h-B.4">Notes on tables</a>
<ol>
<li><a href="notes.html#h-B.4.1">Design rationale</a>
<li><a href="notes.html#h-B.4.2">Recommended Layout Algorithms</a>
</ol>
<li><a href="notes.html#h-B.5">Notes on forms</a>
<ol>
<li><a href="notes.html#h-B.5.1">Incremental display</a>
<li><a href="notes.html#h-B.5.2">Future projects</a>
</ol>
<li><a href="notes.html#h-B.6">Notes on scripting</a>
<ol>
<li><a href="notes.html#h-B.6.1">Reserved syntax for future script macros</a>
</ol>
<li><a href="notes.html#h-B.7">Notes on frames</a>
<ol>
<li><a href="notes.html#h-B.7.1">Frame target algorithm</a>
</ol>
<li><a href="notes.html#h-B.8">Notes on accessibility</a>
<ol>
<li><a href="notes.html#h-B.8.1">Generating alternate text</a>
</ol>
<li><a href="notes.html#h-B.9">Notes on security</a>
</ol>
</div>
<p>The following notes are informative, not normative.

<h2><a name="h-B.1">B.1</a> <a name="urls">Representing non-ASCII characters in URLs</a></h2>

<P>We recommend the following convention for representing
non-ASCII characters in URLs:
each character is represented in UTF-8 (see <a
rel="biblioentry" href="../references.html#ref-RFC2044">[RFC2044]</a>)
as one or more bytes and these bytes are then escaped with the URL
escaping mechanism (converting each byte to %HH, where HH is the
hexadecimal notation of the byte value).
 
<P>This procedure results in the same syntactically legal URL
according to <a rel="biblioentry"
href="../references.html#ref-RFC1738">[RFC1738]</a> or <a
rel="biblioentry" href="../references.html#ref-RFC2141">[RFC2141]</a>
and independent of the <a href="../charset.html#doc-char-set">character
encoding</a> to which the HTML document carrying the URL may have been
transcoded. 

<div class="note"><P> 
<em><strong>Note.</strong> The procedure above doesn't guarantee that
UTF-8 can be used in all schemes or on all resources of a scheme.  The
the producer of a URL (usually the HTML author) is responsible for
ensuring that this works for the URL in question, or using another
notation (with %HH escapes not corresponding to UTF-8 if necessary) to
address the resource in question.
</em>
</div>

<div class="note"><P> 
<em><strong>Note.</strong> Some older user agents trivially process
URLs in HTML using the bytes of the <a
href="../charset.html#doc-char-set">character encoding</a> in which the
document was received. Some older HTML documents rely on this
(illegal) practice and break when transcoded. User agents that
want to handle these older documents should, on receiving a URL
containing characters outside the legal set, first use the conversion
based on UTF-8. Only if the resulting URL does not resolve should they
try constructing a URL based on the bytes of the <a
href="../charset.html#doc-char-set">character encoding</a> in which the
document was received.
</em>
</div>
 
<div class="note"><P> 
<em><strong>Note.</strong> The same conversion based on UTF-8 should
be applied to anchor names as appearing in the <samp
class="ainst-A">name</samp> attribute of the <samp
class="einst">A</samp> element. 
</em>
</div>

<div class="note"><P>
<em><strong><a name="form-urls">Note.</a></strong>
The URL that is constructed when a 
<a href="../interact/forms.html#submit-format">form is submitted</a> 
may be used as an anchor-style link (e.g.,
the <samp class="ainst">href</samp> attribute for the <samp
class="einst">A</samp> element).
Unfortunately, the use of the "&amp;" character to
separate form fields interacts with its use in SGML attribute values
to delimit <a href="../intro/sgmltut.html#character-entities">
character entity references</a>. For example, to use the URL
"http://host/?x=1&amp;y=2" as a linking URL, it must be written &lt;A
href="http://host/?x=1&amp;#38;y=2"&gt; or &lt;A
href="http://host/?x=1&amp;amp;y=2"&gt;. HTTP server implementors, and in
particular, CGI implementors are encouraged to support the use of ";"
in place of "&amp;" to save authors the trouble of 
escaping "&amp;" characters in this manner.
</em>
</div>

<h2><a name="h-B.2">B.2</a> <a name="sgml">SGML implementation notes</a></h2>

<h3><a name="h-B.2.1">B.2.1</a> <a name="notes-line-breaks">Line breaks</a></h3>
<P>SGML specifies that a line break immediately following a start tag
must be ignored, as must a line break immediately before an end tag.
This applies to all HTML elements without exception. Thus, the
following two examples must be rendered identically:

<P>The following three HTML examples should be rendered identically:

<DIV class="example">
<PRE>
&lt;P&gt;Thomas is watching TV.&lt;/P&gt;
</PRE>

<PRE>
&lt;P&gt;
Thomas is watching TV.
&lt;/P&gt;
</PRE>
</DIV>

<p>So must the following two examples:

<DIV class="example">
<PRE>
&lt;A&gt;My favorite Website&lt;/A&gt;
</PRE>

<PRE>
&lt;A&gt;
My favorite Website
&lt;/A&gt;
</PRE>
</DIV>

<h3><a name="h-B.2.2">B.2.2</a> <a name="sgmlfeatures">SGML features with limited support</a></h3>
<p>SGML systems conforming to <a rel="biblioentry"
href="../references.html#ref-ISO8879">[ISO8879]</a> are expected to
recognize a number of features that aren't widely supported by
HTML user agents. We recommend that authors avoid using all of these
features.


<H3><a name="h-B.2.3">B.2.3</a> <a name="sgml-boolean">Boolean attributes</a></h3>

<P>Authors should be aware than many user agents only recognize
the minimized form of boolean attributes and not the full form.

<div class="example"><P>
For instance, authors may want to specify:

<pre>
&lt;OPTION selected&gt;
</pre>

<p><em>instead of</em>

<pre>
&lt;OPTION selected="selected"&gt;
</pre>
</div>

<h3><a name="h-B.2.4">B.2.4</a> Marked Sections</h3>

<p>Marked sections play a role similar to the #ifdef construct recognized
by C preprocessors.

<div class="example">
<pre>
&lt;![INCLUDE[
 &lt;!-- this will be included --&gt;
]]&gt;

&lt;![IGNORE[
 &lt;!-- this will be ignored --&gt;
]]&gt;
</pre>
</div>

<p>SGML also defines the use of marked sections for CDATA content,
within which "&lt;" is not treated as the start of a tag, e.g.,

<div class="example">
<pre>
&lt;![CDATA[
 &lt;an&gt; example of &lt;sgml&gt; markup that is
 not &lt;painful&gt; to write with &lt; and such.
]]&gt;
</pre>
</div>
<p>The telltale sign that a user agent doesn't recognize a marked
section is the appearance of "]]&gt;", which is seen when the user
agent mistakenly uses the first "&gt;" character as the end of the tag
starting with "&lt;![".

<h3><a name="h-B.2.5">B.2.5</a> Processing Instructions</h3>

<p>Processing instructions are a mechanism to capture platform-specific
idioms. A processing instruction begins with &lt;? and ends with &gt; 

<pre>&lt;?<em>instruction</em> &gt;</pre>

<div class="example">
<p>For example:

<pre>
&lt;?&gt;
&lt;?style tt = font courier&gt;
&lt;?page break&gt;
&lt;?experiment&gt; ... &lt;?/experiment&gt;
</pre>
</div>

<p>Authors should be aware that many user agents render processing
instructions as part of the document's text.

<h3><a name="h-B.2.6">B.2.6</a> Shorthand markup</h3>

<p>Some SGML SHORTTAG constructs save typing but add no expressive
capability to the SGML application. Although these constructs
technically introduce no ambiguity, they reduce the robustness of
documents, especially when the language is enhanced to include new
elements. Thus, while SHORTTAG constructs of SGML related to
attributes are widely used and implemented, those related to elements
are not. Documents that use them are conforming SGML documents, but
are unlikely to work with many existing HTML tools. 

<P>The SHORTTAG constructs in question are the following:

<ul>
<li>NET tags<br>
&nbsp;&nbsp;&nbsp; <tt class="example">&lt;name/.../</tt>

<li>closed Start Tag<br>
&nbsp;&nbsp;&nbsp; <tt class="example">&lt;name1&lt;name2&gt;</tt>

<li>Empty Start Tag<br>
&nbsp;&nbsp;&nbsp; <tt class="example">&lt;&gt;</tt>

<li>Empty End Tag<br>
&nbsp;&nbsp;&nbsp; <tt class="example">&lt;/&gt;</tt>
</ul>


<h2><a name="h-B.3">B.3</a> <a name="recs">Notes on helping search engines index your Web site</a></h2>
<p>This section provides some simple suggestions that will
make your documents more accessible to search engines.

<dl>
<dt><strong>Define the document language</strong>
<dd>In the global context of the Web it is important to know which human
language a page was written in. This is discussed in the section on <a
href="../struct/dirlang.html#language-info">language information</a>.

<dt><strong>Specify language variants of this document</strong>
<dd>If you have prepared translations of this document into other
languages, you should use the <samp class="einst">LINK</samp> element to
reference these. This allows an indexing engine to offer users search
results in the user's preferred language, regardless of how the query
was written. For instance, the following links offer French and German
alternatives to a search engine:

<pre class="example">
&lt;LINK rel="alternate" 
         type="text/html"
         href="mydoc-fr.html" hreflang="fr"
         lang="fr" title="La vie souterraine"&gt;
&lt;LINK rel="alternate" 
         type="text/html"
         href="mydoc-de.html" hreflang="de"
         lang="de" title="Das Leben im Untergrund"&gt;
</pre>

<dt><strong>Provide keywords and descriptions</strong>
<dd>Some indexing engines look for <samp class="einst">META</samp>
elements that define a comma-separated list of keywords/phrases, or that
give a short description. Search engines may present these keywords as
the result of a search. The value of the <samp
class="ainst-META">name</samp> attribute sought by a search attribute is
not defined by this specification. Consider these examples,

<pre class="example">
 &lt;META name="keywords" content="vacation,Greece,sunshine"&gt;
 &lt;META name="description" content="Idyllic European vacations"&gt;
</pre>

<dt><strong>Indicate the beginning of a collection</strong>
<dd>Collections of word processing documents or presentations are
frequently translated into collections of HTML documents.  It is
helpful for search results to reference the beginning of the
collection in addition to the page hit by the search. You may help
search engines by using the <samp class="einst">LINK</samp> element
with <b>rel="begin"</b> along with a <samp class="einst">TITLE</samp>,
as in:

<pre class="example"> 
&lt;LINK rel="begin" 
         type="text/html"
         href="page1.html" 
         title="General Theory of Relativity"&gt;
</PRE>

<dt><strong>Provide robots with indexing instructions</strong>
<dd>People may be surprised to find that their site has been indexed by
an indexing robot and that the robot should not have been permitted to
visit a sensitive part of the site. Many Web robots offer facilities for
Web site administrators and content providers to limit what the robot
does. This is achieved through two mechanisms: a "robots.txt" file and
the <samp class="einst">META</samp> element in HTML documents, described
below.
</dl>

<h3><a name="h-B.3.1">B.3.1</a> Search robots</h3>

<h4>The robots.txt file<a name="h-B.3.1.1">&nbsp;</a></h4>
 
<p>When a Robot visits a Web site, say http://www.foobar.com/, it firsts
checks for http://www.foobar.com/robots.txt. If it can find this
document, it will analyze its contents to see if it is allowed to
retrieve the document. You can customize the robots.txt file to apply
only to specific robots, and to disallow access to specific
directories or files.

<p>Here is a sample robots.txt file that prevents all robots from
visiting the entire site</p>


<pre>
        User-agent: *    # applies to all robots
        Disallow: /      # disallow indexing of all pages
</pre>

<p>The Robot will simply look for a "/robots.txt" URL on your site,
where a site is defined as a HTTP server running on a particular host
and port number. Here are some sample locations for <tt>robots.txt</tt>: 

<div class="example"><P>
<table align="center" border="0" 
       bgcolor="#F8F0F0" 
       cellpadding="10" cellspacing="0">
<tr bgcolor="#F0E0E0"><th>Site URL<th>URL for <tt>robots.txt</tt>
<tr><td>http://www.w3.org/
<td>http://www.w3.org/robots.txt
<tr><td>http://www.w3.org:80/
<td>http://www.w3.org:80/robots.txt
<tr><td>http://www.w3.org:1234/
<td>http://www.w3.org:1234/robots.txt
<tr><td>http://w3.org/
<td>http://w3.org/robots.txt
</table>
</div>


<p>There can only be a single "/robots.txt" on a site.  Specifically,
you should not put "robots.txt" files in user directories, because a
robot will never look at them. If you want your users to be able to
create their own "robots.txt", you will need to merge them all into a
single "/robots.txt". If you don't want to do this your users might
want to use the Robots META Tag instead.

<p>Some tips: URL's are case-sensitive, and "/robots.txt" string must
be all lower-case. Blank lines are not permitted.

<p>There must be exactly one "User-agent" field. The robot should be
liberal in interpreting this field. A case-insensitive substring match
of the name without version information is recommended.

<p>If the value is "*", the record describes the default access policy
for any robot that has not matched any of the other records. It is not
allowed to have multiple such records in the "/robots.txt" file.

<p>The "Disallow" field specifies a partial URL that is not to be
visited.  This can be a full path, or a partial path; any URL that
starts with this value will not be retrieved. For example,

<pre>
    <b>Disallow: /help</b> disallows both /help.html and /help/index.html, whereas
    <b>Disallow: /help/</b> would disallow /help/index.html but allow /help.html. 
</pre>
      
<p>An empty value for "Disallow", indicates that all URLs can be
retrieved.  At least one "Disallow" field must be present in the
robots.txt file.

<h4>Robots and the META element<a name="h-B.3.1.2">&nbsp;</a></h4>

<p>The <samp class="einst">META</samp> element allows HTML authors to
tell visiting robots whether a document may be indexed, or used
to harvest more links. No server administrator action is required.

<div class="example"><P>
In the following example a robot should neither index this
document, nor analyze it for links.
<pre>
&lt;META name="ROBOTS" content="NOINDEX, NOFOLLOW"&gt;
</pre>

<p>The list of terms in the content is <tt>ALL</tt>, <tt>INDEX</tt>, 
<tt>NOFOLLOW</tt>, <tt>NOINDEX</tt>. The name and the content attribute
values are case-insensitive.
</div>

<div class="note"><P>
<em>Note: In early 1997 only a few robots implement this,
but this is expected to change as more public attention is
given to controlling indexing robots.</em>
</div>

<h2><a name="h-B.4">B.4</a> <a name="notes-tables">Notes on tables</a></h2>

<h3><a name="h-B.4.1">B.4.1</a> Design rationale</h3>

<p>The HTML table model has evolved from studies of existing SGML
tables models, the treatment of tables in common word processing
packages, and a wide range of tabular layout techniques in magazines,
books and other paper-based documents. The model was chosen to allow
simple tables to be expressed simply with extra complexity available
when needed. This makes it practical to create the markup for
HTML tables with everyday text editors and reduces the learning curve
for getting started. This feature has been very important to the
success of HTML to date.

<p>Increasingly, people are creating tables by converting from other
document formats or by creating them directly with WYSIWYG editors.
It is important that the HTML table model fit well with these
authoring tools. This affects how the cells that span multiple rows or
columns are represented, and how alignment and other presentation
properties are associated with groups of cells.


<h4>Dynamic reformatting<a name="h-B.4.1.1">&nbsp;</a></h4>
<p>A major consideration for the HTML table model is that the author
does not control how a user will size a table, what fonts he or she
will use, etc. This makes it risky to rely on column widths specified
in terms of absolute pixel units. Instead, tables
must be able to change sizes dynamically to match the current window
size and fonts. Authors can provide guidance as to the relative widths
of columns, but user agents should ensure that columns are wide
enough to render the width of the largest element of the cell's
content. If the author's specification must be overridden, 
relative widths of individual columns should not be
changed drastically.

<h4>Incremental display<a name="h-B.4.1.2">&nbsp;</a></h4>
<p>For large tables or slow network connections, incremental table
display is important to user satisfaction. User agents should be able
to begin displaying a table before all of the data has been received.
The default window width for most user agents shows about 80
characters, and the graphics for many HTML pages are designed with
these defaults in mind. By specifying the number of columns, and
including provision for control of table width and the widths of
different columns, authors can give hints to user agents that allow
the incremental display of table contents.

<p>For incremental display, the browser needs the number of columns
and their widths. The default width of the table is the current window
size (<tt>width="100%"</tt>). This can be altered by setting the <samp
class="ainst">width-TABLE</samp> attribute of the <samp
class="einst">TABLE</samp> element. By default, all columns have the
same width, but you can specify column widths with one or more <samp
class="einst">COL</samp> elements before the table data starts.

<p>The remaining issue is the number of columns. Some people have
suggested waiting until the first row of the table has been received,
but this could take a long time if the cells have a lot of content. On
the whole it makes more sense, when incremental display is desired, to
get authors to explicitly specify the number of columns in the <samp
class="einst">TABLE</samp> element.

<p>Authors still need a way of telling user agents whether to use
incremental display or to size the table automatically to fit the cell
contents. In the two pass auto-sizing mode, the number of columns is
determined by the first pass. In the incremental mode, the number of
columns must be stated up front. It makes more sense to set the <samp
class="ainst-TABLE">cols</samp> attribute to the number of columns
rather than using some "layout" attribute (e.g., layout="fixed" or
layout="auto").

<h4>Structure and presentation<a name="h-B.4.1.3">&nbsp;</a></h4>

<p>HTML distinguishes structural markup such as paragraphs and
quotations from rendering idioms such as margins, fonts, colors,
etc. How does this distinction affect tables?  From the purist's point
of view, the alignment of text within table cells and the borders
between cells is a rendering issue, not one of structure.  In practice,
though, it is useful to group these with the structural information,
as these features are highly portable from one application to the
next. The HTML table model leaves most rendering information to
associated style sheets. The model presented in this specification is
designed to take advantage of such style sheets but not to require
them.

<p>Current desktop publishing packages provide very rich control over
the rendering of tables, and it would be impractical to reproduce this
in HTML, without making HTML into a bulky rich text format like RTF or
MIF.  This specification does, however, offer authors the ability to
choose from a set of commonly used classes of border styles. The <samp
class="ainst-TABLE">frame</samp> attribute controls the appearance of the
border frame around the table while the <samp
class="ainst-TABLE">rules</samp> attribute determines the choice of rulings
within the table. A finer level of control will be supported via
rendering annotations. The <samp class="ainst-TABLE">style</samp> attribute
can be used for specifying rendering information for individual
elements. Further rendering information can be given with the <samp
class="einst">STYLE</samp> element in the document head or via linked
style sheets.

<p>During the development of this specification, a number of avenues
were investigated for specifying the ruling patterns for tables. One
issue concerns the kinds of statements that can be made. Including
support for edge subtraction as well as edge addition leads to
relatively complex algorithms.  For instance, work on allowing the
full set of table elements to include the <samp
class="ainst-TABLE">frame</samp> and <samp class="ainst-TABLE">rules</samp>
attributes led to an algorithm involving some 24 steps to determine
whether a particular edge of a cell should be ruled or not. Even this
additional complexity doesn't provide enough rendering control to meet
the full range of needs for tables. The current specification
deliberately sticks to a simple intuitive model, sufficient for most
purposes.  Further experimental work is needed before a more complex
approach is standardized.


<h4>Row and column groups<a name="h-B.4.1.4">&nbsp;</a></h4>
<p>This specification provides a superset of the simpler model presented
in earlier work on HTML+. Tables are considered as being formed from an
optional caption together with a sequence of rows, which in turn consist of
a sequence of table cells. The model further differentiates header and data
cells, and allows cells to span multiple rows and columns.

<p>Following the CALS table model (see <a rel="biblioentry"
href="../references.html#ref-CALS">[CALS]</a>), this specification
allows table rows to be grouped into head and body and foot
sections. This simplifies the representation of rendering information
and can be used to repeat table head and foot rows when breaking
tables across page boundaries, or to provide fixed headers above a
scrollable body panel. In the markup, the foot section is placed
before the body sections. This is an optimization shared with CALS for
dealing with very long tables. It allows the foot to be rendered
without having to wait for the entire table to be processed.

<h4>Accessibility<a name="h-B.4.1.5">&nbsp;</a></h4>

<p>For the visually impaired, HTML offers the hope of setting to
rights the damage caused by the adoption of windows based graphical
user interfaces. The HTML table model includes attributes for labeling
each cell, to support high quality text to speech conversion. The same
attributes can also be used to support automated import and export of
table data to databases or spreadsheets.

<h3><a name="h-B.4.2">B.4.2</a> <a name="layout">Recommended Layout Algorithms</a></h3>

<p>If the <samp class="ainst-TABLE">cols</samp> attribute on the <samp
class="einst">TABLE</samp> element specifies the number of columns,
then the table may be rendered using a fixed layout, otherwise the
autolayout algorithm described below should be used.

<P>If the <samp>width</samp> attribute is not specified, visual user
agents should assume a default value of <tt>100%</tt> for formatting.

<P>It is recommended that user agents increase table widths beyond the
value specified by <samp>width</samp> in cases when cell contents
would otherwise overflow. User agents that override the specified
width should do so within reason. User agents may elect to split words
across lines to avoid the need for excessive horizontal scrolling or
when such scrolling is impractical or undesired.

<P>For the purposes of layout, user agents should consider that table
captions (specified by the <samp class="einst">CAPTION</samp> element)
behave like cells. Each caption is a cell that spans all of the
table's columns if at the top or bottom of the table, and rows if at
the left or right side of the table.

<h4>Fixed Layout Algorithm<a name="h-B.4.2.1">&nbsp;</a></h4>

<p>For this algorithm, it is assumed that the number of columns is
known. The column widths by default should be set to the same size.
Authors may override this by specifying relative or absolute column
widths, using the <samp class="einst">COLGROUP</samp> or <samp
class="einst">COL</samp> elements. The default table width is the
space between the current left and right margins, but may be
overridden by the <samp class="ainst-TABLE">width</samp> attribute on the
<samp class="einst">TABLE</samp> element, or determined from absolute
column widths. To deal with mixtures of absolute and relative column
widths, the first step is to allocate space from the table width to
columns with absolute widths. After this, the space remaining is
divided up between the columns with relative widths.

<p>The table syntax alone is insufficient to guarantee the consistency
of attribute values. For instance, the number of columns specified by
the <samp class="ainst-TABLE">cols</samp> attribute may be inconsistent with
the number of columns implied by the <samp class="einst">COL</samp>
elements. This in turn, may be inconsistent with the number of columns
implied by the table cells. A further problem occurs when the columns
are too narrow to avoid overflow of cell contents. The width of the
table as specified by the <samp class="einst">TABLE</samp> element or
<samp class="einst">COL</samp> elements may result in overflow of cell
contents. It is recommended that user agents attempt to recover
gracefully from these situations, e.g., by <a
href="../struct/text.html#hyphenation">hyphenating words</a> and
resorting to splitting words if hyphenation points are unknown.

<p>In the event that an indivisible element causes cell overflow, the
user agent may consider adjusting column widths and re-rendering the
table. In the worst case, clipping may be considered if column width
adjustments and/or scrollable cell content are not feasible. In any
case, if cell content is split or clipped this should be indicated to
the user in an appropriate manner.

<h4>Autolayout Algorithm<a name="h-B.4.2.2">&nbsp;</a></h4>

<p>If the <samp class="einst">COLS</samp> attribute is missing from
the table start tag, then the user agent should use the following
autolayout algorithm. It uses two passes through the table data and
scales linearly with the size of the table.

<p>In the first pass, line wrapping is disabled, and the user agent
keeps track of the minimum and maximum width of each cell. The maximum
width is given by the widest line. Since line wrap has been disabled,
paragraphs are treated as long lines unless broken by <samp
class="einst">BR</samp> elements. The minimum width is given by the
widest text element (word, image, etc.) taking into account leading
indents and list bullets, etc. In other words, it is necessary to
determine the minimum width a cell would require in a window of its
own before the cell begins to overflow. Allowing user agents to split
words will minimize the need for horizontal scrolling or in the worst
case, clipping the cell contents.

<p>This process also applies to any nested tables occurring in cell
content. The minimum and maximum widths for cells in nested tables are
used to determine the minimum and maximum widths for these tables and
hence for the parent table cell itself. The algorithm is linear with
aggregate cell content, and broadly speaking, independent of the depth
of nesting.

<P>To cope with character alignment of cell contents, the algorithm
keeps three running min/max totals for each column: Left of align char,
right of align char and unaligned. The minimum width for a column is then:
<tt>max(min_left + min_right, min_non-aligned)</tt>.

<P>The minimum and maximum cell widths are then used to determine the
corresponding minimum and maximum widths for the columns. These in turn,
are used to find the minimum and maximum width for the table. Note that
cells can contain nested tables, but this doesn't complicate the code
significantly. The next step is to assign column widths according to the
available space (i.e., the space between the current left and right margins).

<P>For cells that span multiple columns, a simple approach consists of
apportioning the min/max widths evenly to each of the constituent
columns. A slightly more complex approach is to use the min/max widths of
unspanned cells to weight how spanned widths are apportioned. Experiments
suggest that a blend of the two approaches gives good results for a wide
range of tables.

<P>The table borders and intercell margins need to be included in assigning
column widths. There are three cases:

<OL>
<LI><B>The minimum table width is equal to or wider than the available
space.</B> In this case, assign the minimum widths and allow the user to
scroll horizontally. For conversion to braille, it will be necessary to
replace the cells by references to notes containing their full content.
By convention these appear before the table.

<LI><B>The maximum table width fits within the available space.</B> In
this case, set the columns to their maximum widths.

<LI><B>The maximum width of the table is greater than the available
space, but the minimum table width is smaller.</B> In this case, find
the difference between the available space and the minimum table width,
lets call it <b>W</b>. Lets also call <b>D</b> the difference between
maximum and minimum width of the table.

<P>For each column, let <b>d</b> be the difference between maximum
and minimum width of that column. Now set the column's width to the
minimum width plus <b>d</b> times <b>W</b> over <b>D</b>. This makes
columns with large differences between minimum and maximum widths wider
than columns with smaller differences.
</OL>

<P>This assignment step is then repeated for nested tables using the
minimum and maximum widths derived for all such tables in the first
pass. In this case, the width of the parent table cell
plays the role of the current window size in the above description.
This process is repeated recursively for all nested tables. The topmost
table is then rendered using the assigned widths. Nested tables are
subsequently rendered as part of the parent table's cell contents.

<P>If the table width is specified with the <samp
class="ainst-TABLE">width</samp> attribute, the user agent attempts to set
column widths to match. The <samp class="ainst-TABLE">width</samp> attribute
is not binding if this results in columns having less than their
minimum (i.e., indivisible) widths.

<P>If relative widths are specified with the <samp
class="einst">COL</samp> element, the algorithm is modified to
increase column widths over the minimum width to meet the relative
width constraints. The <samp class="einst">COL</samp> elements should
be taken as hints only, so columns shouldn't be set to less than their
minimum width. Similarly, columns shouldn't be made so wide that the
table stretches well beyond the extent of the window. If a <samp
class="einst">COL</samp> element specifies a relative width of zero,
the column should always be set to its minimum width.

<p>When using the two pass layout algorithm, the default alignment
position in the absence of an explicit or inherited <samp
class="ainst-TABLE">charoff</samp> attribute can be determined by choosing
the position that would center lines for which the widths before and
after the alignment character are at the maximum values for any of the
lines in the column for which <tt>align="char"</tt>. For incremental
table layout the suggested default is <tt>charoff="50%"</tt>. If
several cells in different rows for the same column use character
alignment, then by default, all such cells should line up, regardless
of which character is used for alignment. Rules for handling objects
too large for column apply when the explicit or implied alignment
results in a situation where the data exceeds the assigned width of
the column.

<div class="note"><P>
<em><strong>Choice of attribute names.</strong> 
It would have been
preferable to choose values for the <samp class="ainst-TABLE">frame</samp>
attribute consistent with the <samp class="ainst-TABLE">rules</samp>
attribute and the values used for alignment. For instance: <tt>none,
top, bottom, topbot, left, right, leftright, all</tt>. Unfortunately,
SGML requires enumerated attribute values to be unique for each
element, independent of the attribute name. This causes immediate
problems for "none", "left", "right" and "all". The values for
the<samp class="ainst-TABLE">frame</samp> attribute have been chosen to
avoid clashes with the <samp class="ainst-TABLE">rules</samp>, <samp
class="ainst-TABLE">align</samp> and <samp class="ainst-TABLE">valign-COLGROUP</samp>
attributes. This provides a measure of future proofing, as it is
anticipated that the <samp class="ainst">frame</samp> and <samp
class="ainst">rules</samp> attributes will be added to other table
elements in future revisions to this specification. An alternative
would be to make <samp class="ainst-TABLE">frame</samp> a CDATA attribute.
The consensus of the W3C HTML Working Group was that the benefits of
being able to use SGML validation tools to check attributes based on
enumerated values outweighs the need for consistent names.</em>
</div>

<h2><a name="h-B.5">B.5</a> <a name="notes-forms">Notes on forms</a></h2>

<h3><a name="h-B.5.1">B.5.1</a> Incremental display</h3> 
<p>The incremental display of documents
being received from the network gives rise to certain problems with
respect to forms. User agents should prevent forms from being
submitted until all of the form's elements have been received. 

<P>The incremental display of documents raises some issues with
respect to tabbing navigation. The heuristic of giving focus to the
lowest valued <samp class="ainst">tabindex</samp> in the document
seems reasonable enough at first glance. However this implies having
to wait until all of the document's text is received, since until
then, the lowest valued <samp class="ainst">tabindex</samp> may still
change. If the user hits the tab key before then, it is reasonable for
user agents to move the focus to the lowest currently available
<samp class="ainst">tabindex</samp>.


<P>If forms are associated with client-side scripts, there is further
potential for problems. For instance, a script handler for a given
field may refer to a field that doesn't yet exist.

<h3><a name="h-B.5.2">B.5.2</a> Future projects</h3>
<p>This specification defines a set of elements and attributes powerful
enough to fulfill the general need for producing forms. However there is
still room for many possible improvements. For instance the following
problems could be addressed in the future:

<ul>
<li>The range of form field types is too limited in comparison with
modern user interfaces. For instance there is no provision for tabular 
data entry, sliders or multiple page layouts.

<li>Servers cannot update the fields in a submitted form and instead have
to send a complete HTML document causing screen flicker.

<li>These also cause problems for speech based browsers, making it
difficult for the visually impaired to interact with HTML forms.
</ul>

<p>Another possible extension would be to add the <samp
class="ainst">usemap</samp> attribute to <samp
class="einst">INPUT</samp> for use as as client-side image map when
"<samp class="ainst-INPUT">type</samp>=image".  The <samp
class="einst">AREA</samp> element corresponding to the location
clicked would contribute the value to be passed to the server. To
avoid the need to modify server scripts, it may be appropriate to
extend <samp class="einst">AREA</samp> to provide x and y values for
use with the <samp class="einst">INPUT</samp> element.

<h2><a name="h-B.6">B.6</a> <a name="notes-scripting">Notes on scripting</a></h2>

<h3><a name="h-B.6.1">B.6.1</a> Reserved syntax for future script macros</h3>

<p>This specification reserves syntax for the future support of
script macros in HTML CDATA attributes. The intention is to allow
attributes to be set depending on the properties of objects that
appear earlier on the page. The syntax is:

<pre>   attribute = "... &amp;{ <i>macro body</i> }; ... "</pre>

<h4>Current Practice for Script Macros<a name="h-B.6.1.1">&nbsp;</a></h4>
<p>The macro body is made up of one or more statements in the
default scripting language (as per intrinsic event attributes).
The semicolon following the right brace is always needed, as
otherwise the right brace character "}" is treated as being
part of the macro body. Its also worth noting that quote marks
are always needed for attributes containing script macros.

<p>The processing of CDATA attributes proceeds as follows:

<ol>
<li>The SGML parser evaluates any SGML entities (e.g., "&amp;gt;").
<li>Next the script macros are evaluated by the script engine.
<li>Finally the resultant character string is passed to the
application for subsequent processing.
</ol>

<p>Macro processing takes place when the document is loaded (or
reloaded) but does not reoccur when the document is resized,
repainted, etc.

<div class="deprecated-example">
<P><span class="example-title">DEPRECATED EXAMPLE:</span><br>
Here are some examples using JavaScript. The first one randomizes
the document background color:

<pre>    
&lt;BODY bgcolor='&{randomrbg()};'&gt;
</pre>

<p>Perhaps you want to dim the background for evening viewing:

<pre>    
&lt;BODY bgcolor='&{if(Date.getHours &gt; 18)...};'&gt;
</pre>

<p>The next example uses JavaScript to set the coordinates
for a client-side image map:

<pre>    
&lt;MAP NAME=foo&gt;
   &lt;AREA shape="rect" coords="&{myrect(imageurl)};" href="&{myurl};" alt=""&gt;
 &lt;/MAP&gt;
</pre>

<p>This example sets the size of an image based upon document properties:

<pre>    
&lt;IMG src="bar.gif" width='&{document.banner.width/2};' height='50%' alt="banner"&gt;
</pre>

<p>You can set the URL for a link or image by script:

<pre>
 &lt;SCRIPT type="text/javascript"&gt;
   function manufacturer(widget) {
       ...
   }
   function location(manufacturer) {
       ...
   }
   function logo(manufacturer) {
       ...
   }
 &lt;/SCRIPT&gt;
  &lt;A href='&{location(manufacturer("widget"))};'&gt;widget&lt;/A&gt;
  &lt;IMG src='&{logo(manufacturer("widget"))};' alt="logo"&gt;
</pre>

<p>This last example shows how SGML CDATA attributes can be quoted
using single or double quote marks. If you use single quotes around the
attribute string then you can include double quote marks as part of the
attribute string. Another approach is use &amp;quot; for double quote
marks:

<pre>   
&lt;IMG src="&{logo(manufacturer(&amp;quot;widget&amp;quot;))};" alt="logo"&gt;
</pre>
</div>

<H2><a name="h-B.7">B.7</a> <a name="notes-frames">Notes on frames</a></H2>
<H3><a name="h-B.7.1">B.7.1</a> Frame target algorithm</H3>

<P>Since there is no guarantee that a frame target name is unique, it
is appropriate to describe the current practice in finding a
frame given a target name:

<ol>
<li> If the target name is a reserved word as described in the
normative text, apply it as described.
<li> Otherwise, perform a depth-first search of the frame hierarchy
in the window that contained the link. Use the first frame whose
name is an exact match.
<li> If no such frame was found in (2), apply step 2 to each window,
in a front-to-back ordering.  Stop as soon as you encounter a frame with
exactly the same name.
<li> If no such frame was found in (3), create a new window and
assign it the target name.
</ol>

<H2><a name="h-B.8">B.8</a> Notes on accessibility</H2>
<H3><a name="h-B.8.1">B.8.1</a> <a name="altgen">Generating alternate text</a></H3>
<P>When an author does not set the <samp class="ainst">alt</samp>
attribute for the <samp class="einst">IMG</samp> or <samp
class="einst">APPLET</samp> elements, user agents should
supply the alternate text, calculated in the following order:

<ol>
<li>If the <samp class="ainst">title</samp> has been specified, 
its value should be used as alternate text.

<li>Otherwise, if HTTP headers provide title information when the
included object is retrieved, this information should be used as
alternate text.

<li>Otherwise, if the included object contains text fields (e.g., GIF
images contain some text fields), information extracted from the text
fields should be used as alternate text. Since user agents may have to
retrieve an entire object first in order to extract textual
information, user agents may adopt more economical approaches (e.g.,
content negotiation).
	    
<li>Otherwise, in the absence of other information, user agents should
use the file name (minus the extension) as alternate text.
</ol>

<P>When an author does not set the <samp class="ainst">alt</samp>
attribute for the <samp class="einst">INPUT</samp> element, user
agents should supply the alternate text, calculated in the following
order:

<ol>
<li>If the <samp class="ainst">title</samp> has been specified, 
its value should be used as alternate text.

<li>Otherwise, if the <samp class="ainst-INPUT">name</samp> has been
specified, its value should be used as alternate text.

<li>Otherwise (submit and reset buttons), the value of the <samp
class="ainst">type</samp> attribute should be used as alternate text.
</ol>

<h2><a name="h-B.9">B.9</a> <a name="notes-security">Notes on security</a></H2>

<P>Anchors, embedded images, and all other elements that contain 
<a href="../types.html#type-url">URLs</a> as parameters may cause the
URL to be dereferenced in response to user input. In this case, the
security issues of <a rel="biblioentry"
href="../references.html#ref-RFC1738">[RFC1738]</a> should be
considered.

The widely deployed methods for submitting form requests -- HTTP and
SMTP -- provide little assurance of confidentiality. Information
providers who request sensitive information via forms -- especially
with the <samp class="einst">INPUT</samp> element, <samp
class="ainst-INPUT">type</samp>="password" -- should be aware and make
their users aware of the lack of confidentiality.
<div class="navbar">
<hr><center><a href="changes.html">previous</a> &nbsp; <a href="../references.html">next</a> &nbsp; <a href="../cover.html#toc">contents</a> &nbsp; <a href="../index/elements.html">elements</a> &nbsp; <a href="../index/attribs.html">attributes</a>
</center></div>
</body>
</html>
